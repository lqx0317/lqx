## （一）数据仓库
### 1.数据仓库介绍
#### ➤➤➤ 数据仓库定义 ➤➤➤
#### （1）数据仓库
>数据仓库是一个面向主题的、集成的、随时间变化的、非易失的数据集合，用于支持管理者的决策过程。

- 数据仓库试图提供一种从操作型系统到决策支持环境的数据流架构模型。数据仓库概念的提出，是为了解决和这个数据流相关的各种问题，主要是解决多重数据复制带来的高成本问题。在没有数据仓库的时代，需要大量的冗余数据来支撑多个决策支持环境。

#### （2）实体
在信息系统中，将事务抽象为实体、属性、关系来表示数据关联和事务描述，这种对数据的抽象建模通常被称为ER实体关系模型。
- 实体：实体是现实世界中区别于其他对象的事物或对象。例如：企业中的每个人都是一个实体，贷款也可以被看作实体。每个实体有一组性质，其中一部分性质的取值可以唯一的标识实体。例如一个人的客户id可以唯一的标识这个人。
- 实体集：实体集是相同类型（即具有相同性质或属性）的实体集合。例如某个银行的所有客户的集合可被定义为实体集customer，实体集loan表示某个银行所发放的所有贷款的集合。
- 属性：实体通过一组属性来表示，属性是实体集中每个成员所拥有的描述性性质。例如银行的客户可能具有属性客户id、客户名称、客户住址、客户年龄等属性。
- 联系：联系是指多个实体间的相互关联。例如客户和贷款的联系。

#### （3）关系模型
- 关系：若干元组（一条数据记录）的集合，就是数据库表。
- 关系模式：
- 关系模型：是一组关系模式的集合。关系模型是用二维表的形式表示实体和实体间联系的数据模型。也就是数据库。
- E-R图：是由实体、属性和关系三个要素组成。
- ER图转换为关系模型：将实体、属性、关系转换为关系模式。

#### （4）面向主题
操作型数据库的数据组织面向事务处理任务，各个业务系统之间各自分离，而数据仓库中的数据是按照一定的主题域进行组织的。

- 面向应用：传统数据库是面向应用进行数据组织的。
- 面向主题：相对应的，数据仓库中的数据是面向主题进行组织的。

主题是一个抽象概念，是在较高层次上将企业信息系统中的数据综合、归类并进行分析利用的抽象。每个主题对应一个宏观的分析领域。在逻辑意义上，它是对应企业中某一宏观分析领域所涉及的分析对象。例如“销售分析”就是一个分析领域，因此这个数据仓库应用的主题就是“销售分析”。

#### （5）主题域
主题域通常是联系较为紧密的数据主题的集合。可以根据业务的关注点，将这些数据主题划分到不同的主题域。

主题域通常是联系较为紧密的数据主题的集合。

划分主题域：
主题设计是对主题域进一步分解，细化的过程。主题域下面可以有多个主题，主题还可以划分成更多的子主题。
- 按照业务或业务过程划分：比如一个靠销售广告位置的门户网站主题域可能会有广告域、客户域等，而广告域可能就会有广告的库存，销售分析，内部投放分析等主题。
- 根据需求方划分：比如需求方为财务部，就可以设定对应的财务主题域，而财务主题域里面可能就会有员工工资分析，投资回报比分析等主题
- 切入的出发点逻辑不一样，就可以存在不同的划分逻辑。在建设过程中科采用迭代方式，不纠结于一次完成所有主题的抽象，可先从明确定义的主题开始，后续逐步归纳总结成自身行业的标准模型。

典型的主题域有：顾客、产品、交易、政策、账目。在数据仓库中，每一个主要主题域都是以**一组相关的表**来具体实现的。一个主题域可能由10个、100个或更多的相互关联的物理表组成。

#### （6）集成
集成的概念与面向主题是密切相关的。数据仓库中的数据是对原有分散的数据库数据抽取、清理的基础上经过系统加工、汇总和整理得到的，必须消除源数据中的不一致性，以保证数据仓库内的信息是关于企业的一致的全局信息。

#### （7）随时间变化（反映历史变化）
数据仓库中的数据通常包含历史信息，系统记录了企业从过去某一时点（如开始应用数据仓库的时点）到目前各个阶段的信息，通过这些信息，可以对企业的发展历程和未来趋势做出定量分析和预测。

#### （8）稳定的（非易失）
数据仓库的数据主要供企业决策分析之用，所涉及的数据操作主要是数据查询，一旦某个数据进入数据仓库以后，一般情况下将被长期保留，也就是数据仓库中一般有大量的查询操作，但修改和删除操作很少，通常只需要定期的加载、刷新。

#### ➤➤➤ 数据仓库发展 ➤➤➤
#### （1）数仓发展_角度1
- 开始阶段<br>
1978~1988，MIT的研究员将业务系统和分析系统分开，将业务处理和分析处理分成不同的层次，并采用单独的数据存储和完全不同的设计准则。
初步确定了分析系统的四个组成部分：数据获取、数据访问、目录（元数据管理）、用户服务（数据服务，人机交互）
- 全企业集成<br>
信息孤岛问题不断增加，IBM提出了各种概念，定义了85种信息仓库的组件，包括数据抽取、转换、有效性验证、加载、Cube开发和图形化查询工具等，不过没有付诸实际的架构设计。
- 企业级数据仓库<br>
1991年，Bill Inmon出版了他有关数据仓库的第一本书，这本书不仅仅说明了为什么要建数据仓库。数据仓库能给你带来什么。更重要的是，Inmon第一次提供了如何建设数据仓库的指导性意见。该书定义了数据仓库非常具体的原则，包括：数据仓库是面向主题的、集成的、包含历史的、不可更新、面向决策支持的、面向全企业的、最明细的数据存储、数据快照式的数据获取。这些原则引发了一些争议和分歧。
- 数据集市<br>
1994~1996，数据仓库发展的第一明显分歧是数据集市概念的产生。由于企业级数据仓库的设计，实施很困难，使得最早吃数据仓库螃蟹的公司遭到了大面积的失败。因此数据仓库的建设者和分析师开始考虑只建设企业级数据仓库的一部分，然后再逐步添加。单着有悖于Inmon的原则：各个实施部分的数据抽取、清洗、转换和加载是独立的，导致了数据的混乱与不一致性。而且部分实施的项目也有很多失败，除了常见的业务需求定义不清，项目执行不力之外，很重要的原因是因为其数据模型设计。在企业级数据仓库中，Inmon推荐采用3范式进行数据建模，也不排除其他方法。但是Inmon的追随者固守OLTP系统3范式设计，从而无法支持DSS系统的性能和数据易访问性的要求。此时，Kimball的第一本书掀起了数据集市的狂潮，这本书提供了如何为分析进行数据模型优化的详细指导意见。从此，维度模型大行其道，也为传统的关系型数据模型和多维OLAP之间建立了很好的桥梁。
- 争吵与混乱<br>
企业级数据仓库还是部门级数据集市？关系型还是多维？Inmon和Kimball一开始就争论不休，形成了相对立的两派：Inmon和Kimball。在初期，数据集市的快速实施和较高的成功率让Kimball派占了上风，但是很快陷入某种困境：企业中存在6-7个不同的数据集市，分别有不同的ETL，相互之间的数据也不完全一致。同时，各个项目实施中也侵犯了Inmon开始定下的准则：把数据集市当成众多OLTP系统之后的又一个系统，而不是一个基础性的集成性的东西，为保证数据的准确性和实时性，有的甚至可以有OLTP系统直接修改数据集市里面的数据，为了保证系统的性能，有的数据集市删除了历史数据。这导致了一些新的应用的出现，如ODS、DataMart。Inmon吐槽：”你可以打到几万吨的小鱼小虾，但是这些小鱼小虾加起来不是大鲸鱼。“
- 合并<br>
1998~2001,经过多番争吵，结论是需要不同的BI架构来满足不同的业务需求，Inmon也推出了新的BI架构CIF，把Kimball的数据集市也包含进来了。但是还有争论：是自顶向下，还是自底向上。CIF的核心思想是把整个架构分成不同的层次以满足不同的需求，把DW、DM、ODS进行详细的描述，现在CIF已经成为建设数据仓库的框架指南。
- 未来<br>
未来的数据仓库有人说是RealTime DW。从战略决策到战术决策的发展，对数据实时性要求更高。需求更多样化，需求有不同的架构和应用层次以适应不同的需求。数据量膨胀，对数据建模，数据组织和层次划分提出了更高的要求。

#### ➤➤➤ 数据集市 ➤➤➤
#### （1）数据集市
数据集市是部门级数据仓库的、小型的、面向部门或工作组的数据仓库。数据集市和数据仓库相比功能不同，数据仓库主要对各种不同操作系统的数据进行清理、合并等，称为一个统一的仓库。数据集市则是从数据仓库中抽取数据来形成决策支持的数据来源，同时它也可以直接从业务部门或外界来获得数据。数据集市和数据仓库之间存在着以下几个方面的不同：（1）面向的对象不同，数据仓库面向的对象是企业级，而数据集市面向的对象是部门级。（2）数据的粒度不同，数据仓库的粒度比较小，数据集市的数据则一般是概括性的。
#### （2）数据集市分类
数据集市有两个发展方面，一种是独立的数据集市结构，企业在开始进行企业信息化时，为了节省企业成本，并没有建立一个全局的数据仓库，而只是在各个部门建立局部的数据库，以后随着发展形成各个独立的数据集市。另一种是从属的数据集市，企业在信息化时，为了一劳永逸而建立起一个全局性的数据仓库，在以后的发展中，为了满足各部门即时查询的需要，提高查询的响应时间，而在各个部门中建立各自的数据集市。数据集市的数据来源便是全局性的数据仓库。
###### 独立的数据集市
缺点：
- 数据的冗余：各个数据集市相互隔离，对于每个数据集市来说，必须要有一个整体数据的备份。
- 流程的冗余：对于独立的数据集市来说，必须把流程进行复制一份
- 非集成化：由于各个数据集市是由各个不同的团队所建立的，且各个数据集市是面向各个部门的，这种情况势必造成独立的数据集市无法集成化。

###### 从属的数据集市

#### （3）OLAP
当前的数据处理大致分为两类：联机事务处理OLTP、联机分析处理OLAP。OLTP只能处理一些简单的查询、删除和增加功能，远远无法满足目前企业的发展需要。OLAP的出现弥补了这一空缺，OLAP可以将企业海量的数据转化为有用的信息，对数据进行归纳、分析和处理以帮助企业进行决策。同时OLAP可以运用切片、切块和钻取等技术来实现数据从微观到宏观的动态多维分析，并以一种直观易懂得饼图、曲线图和直方图等形式展现给用户。

#### （4）数据集市结构
企业中的数据集市可以有关系数据存储结构和多维数据存储结构，所以在数据集市上建立的OLAP也有两种类型，一种是MOLAP，它是以多维数据存储方式为核心的。另一种是ROLAP，它是以关系数据存储方式为核心的。

#### （5）多维数据集市的OLAP
一个多维数据集有两个或两个以上的维度。

#### （6）关系数据集市的OLAP

#### （7）多维数据集设计准则
粒度、度量、维度

#### （8）多维数据可视化



### 2.数据仓库架构
#### （1）独立数据集市架构
采用独立数据集市架构，分析型数据以部门为基础来部署，不需要考虑企业级别的信息共享和集成。

#### （2）辐射状企业信息工厂Inmon架构
#### （3）Kimball架构
#### （4）混合架构

### 3.数据仓库设计

### 4.数据仓库组件

## （二）数据治理
## （三）数据安全